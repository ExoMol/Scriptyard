# Duo Fitting Generator
_by Wilfrid Somogyi_

This is a Python script for converting the output of a Duo fitting run into a new fitting input file. It works by duplicating the contents of the previous input file, and replacing the previous fitting parameter values with those from an iteration of the user's choice.

The script takes a single positional command line argument, which specifies the output file to read the values from

```
python do_duo_input.py fitting_01.out
```

By default this will echo the new input to `sys.stdout` (the current terminal), but you can specify a file name to write the new input to using the optional command line argument `-o`

```
python do_duo_input.py -o fitting_02.inp fitting_01.out
```

The new values for the fitting parameters are taken from the last iteration by default, but you can specify a specific iteration number to take the fitted values from using the command line argument `-n`

```
python do_duo_input.py -o fitting_02.inp -n 3 fitting_01.out
```

When producing a new input file, the script will also deposit the previous values of all functional parameters as a comment at the end of each line. It will also preserve the presence parameter control keys `fit` and `link`. 

An example extract of a fitting input file generated by the script is shown below for a Duo `poten` object. The rightmost column shows the values of the parameters that were used in the previous input file, and it can be seen that they have been replaced with updated values from the last fitting run.

```
poten 1
name "X3Sigma-"
symmetry g -
lambda 0
mult 3
type   MLR
values
VE           0.00000000000000E+00                ( 0.00000000000000E+00)
RE           1.20752668940000E+00                ( 1.20752668940000E+00)
DE           4.22350200000000E+04                ( 4.22350200000000E+04)
RREF        -1.00000000000000E+00                (-1.00000000000000E+00)
P            4.00000000000000E+00                ( 4.00000000000000E+00)
NL           1.00000000000000E+00                ( 1.00000000000000E+00)
NR           1.00000000000000E+01                ( 1.00000000000000E+01)
B0          -2.90581371098969E+00 fit            (-2.92054233362644E+00)
B1           0.00000000000000E+00                ( 0.00000000000000E+00)
B2          -1.30885982736466E+00 fit            ( 4.62523312018948E+00)
B3          -3.44496087468359E+00 fit            (-5.33683099054836E+01)
B4           1.27466672711006E+01 fit            ( 1.80972322823629E+02)
B5          -2.42885086156956E+01 fit            (-2.80374505298241E+02)
B6           1.73916243640487E+01 fit            ( 1.63793420131489E+02)
B7           0.00000000000000E+00                ( 0.00000000000000E+00)
B8           0.00000000000000E+00                ( 0.00000000000000E+00)
B9           0.00000000000000E+00                ( 0.00000000000000E+00)
B10          0.00000000000000E+00                ( 0.00000000000000E+00)
A0           0.00000000000000E+00                ( 0.00000000000000E+00)
A1           0.00000000000000E+00                ( 0.00000000000000E+00)
A2           0.00000000000000E+00                ( 0.00000000000000E+00)
A3           0.00000000000000E+00                ( 0.00000000000000E+00)
A4           0.00000000000000E+00                ( 0.00000000000000E+00)
A5           0.00000000000000E+00                ( 0.00000000000000E+00)
A6           2.09468444255048E+04                ( 2.09468444255048E+04)
A7           0.00000000000000E+00                ( 0.00000000000000E+00)
A8           4.12336897629017E+06                ( 4.12336897629017E+06)
A9           0.00000000000000E+00                ( 0.00000000000000E+00)
A10          5.97787817082676E+04                ( 5.97787817082676E+04)
end
```

The script has been written to perform this procedure in a fairly generalised fashion, so it should be possible to implement new functionality to the input file generator. More information on this is given in the Python file itself.